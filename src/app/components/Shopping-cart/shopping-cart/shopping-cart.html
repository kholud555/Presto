<app-main-layout />

<div class="container py-4">
  <div class="row">

</div>
<div class="cart-container">

  <h2 class="cart-title">
    <span class="word-your">Your</span>&nbsp;<span class="word-cart">Cart</span>
  </h2>
  <div class="col-sm-12 empty-cart-cls text-center" [style.display]="this.cartempty?'block':'none'">
    <img src='/Assets/remove-cart_8907064.png' width="130" height="130" class="img-fluid mb-4 mx-auto">
    <h3><strong>Your Cart is Empty</strong></h3>
    <h4>Add something to make me happy ðŸ˜Š</h4>
    <a href="getAllResturant" class="btn btn-primary cart-btn-transform mt-3" data-abc="true">continue shopping</a>
  
  </div>
<div class="cart-data" [style.display]="this.cartempty?'none':'block'">
    <h2 class="restaurant">{{this.cart?.restaurantName}}</h2>
@for (item of this.cart?.shoppingCartItems?.$values; track $index) {
  <div class="cart  cart-item" >
    <div class="cart-image">
    <img  [src]="'https://prestoordering.somee.com'+item.imageFile" 
       alt="Vegetable Salad"
        class="item-image">

    </div>
    <div class="cart-details">
      <h5 class="item-name">{{item.itemName}}</h5>
      <p class="text-muted">{{item.preferences}}</p>
    </div>
    <div class="cart-price">
      <span>{{item.totalPrice}} EGP</span>
    </div>
       
      <div class="cart-quantity">
        <div class="quantity-controls">
          <button (click)="update_item(item.shoppingCartItemId,-1)" class="quantity-btn" type="button">-</button>
          <span class="quantity-display">{{item.quantity}}</span>
          <button (click)="update_item(item.shoppingCartItemId,1)" class="quantity-btn" type="button">+</button>
        </div>
              </div>
        <button 
        #btn
          class="cart-delete"
          type="button"
          (click)="delete_item(item.shoppingCartItemId,btn.closest('.cart-item'))">
          <!-- onclick="this.closest('.cart-item').classList.add('deleting')"> -->
          <mat-icon>delete_outline</mat-icon>
        </button>
      
  </div>
}
<!-- Add this between cart items and order summary -->
<div class="clear-cart-container" [style.display]="this.cartempty?'none':'block'">
  <button class="clear-cart-btn clear-cart-summary clear-cart-orange" 
          (click)="ClearCart()">
    <mat-icon>delete_sweep</mat-icon>
    Clear Cart
  </button>
</div>
  </div>

</div>
<div [style.display]="this.cartempty?'none':'block'" class="order-summary">
  <h3 class="Order-header">Order Summary</h3>

<div class="card border border-0">
  <div class="card-body ">
    <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <div class="d-flex justify-content-between">
        <div class="font-weight-bold">Sub Total</div>
        <div>{{cart?.subTotal}} EGP</div>
      </div>
    </li>
    <li class="list-group-item">
      <div class="d-flex justify-content-between">
        <div class="font-weight-bold">Delivary Price</div>
        <div>{{cart?.delivaryPrice}} EGP</div>
      </div>
    </li>
 
</ul>
  </div>
  <div class="card-footer">
    <h4>
   <div class="d-flex justify-content-between">
        <div class="font-weight-bold">Total Price</div>
        <div>{{cart?.totalAfterDiscount}} EGP</div>
      </div>
    </h4>
</div>

</div>
    <button (click)="Checkout()" class="btn btn-primary btn-lg btn-block w-100">Checkout</button>
</div>